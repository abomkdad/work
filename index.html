<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAD Employment Form</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root { --primary: #D4AF37; --dark: #2c3e50; --light: #f8f9fa; --green: #25D366; }
        body { margin: 0; padding: 0; font-family: 'Assistant', sans-serif; background: var(--light); color: #333; padding-bottom: 80px; }
        
        /* --- Header --- */
        .app-header { background: white; padding: 15px; text-align: center; border-bottom: 3px solid var(--primary); box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        .logo { max-width: 100px; }
        .title { font-size: 18px; font-weight: bold; margin-top: 5px; }

        /* --- Form Container --- */
        .container { max-width: 800px; margin: 20px auto; padding: 0 15px; }
        
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .card-title { font-weight: bold; font-size: 16px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; color: var(--dark); }

        /* --- Inputs --- */
        .input-group { margin-bottom: 15px; }
        .label { display: block; font-size: 14px; margin-bottom: 5px; font-weight: bold; }
        .input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; background: #fff; transition: 0.3s; }
        .input:focus { border-color: var(--primary); outline: none; }

        /* --- Contract Preview --- */
        .contract-box { 
            height: 300px; overflow-y: auto; background: #fdfdfd; 
            border: 1px solid #ccc; padding: 15px; font-size: 13px; line-height: 1.6; 
            border-radius: 8px; text-align: justify;
        }
        .highlight { background-color: #fff3cd; padding: 0 2px; font-weight: bold; }

        /* --- Buttons --- */
        .btn { width: 100%; padding: 15px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s; }
        .btn-sig { background: white; border: 2px dashed #ccc; color: #555; }
        .btn-sig.done { border-color: var(--green); background: #e8f8f5; color: var(--green); }
        .btn-save { background: var(--dark); color: var(--primary); margin-top: 10px; }
        
        /* --- Signature Modal --- */
        #sigModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 2000; display: none; flex-direction: column; }
        .sig-header { padding: 15px; text-align: center; background: #eee; font-weight: bold; }
        canvas { flex: 1; border-bottom: 1px solid #ddd; }
        .sig-footer { padding: 15px; display: flex; gap: 10px; }

        /* --- Print / PDF View --- */
        #printArea { display: none; }
        .a4-page { width: 210mm; min-height: 297mm; margin: 0 auto; background: white; padding: 20mm; box-sizing: border-box; position: relative; }
        
        @media print {
            body * { visibility: hidden; }
            #printArea, #printArea * { visibility: visible; display: block !important; }
            #printArea { position: absolute; left: 0; top: 0; width: 100%; }
            .a4-page { box-shadow: none; margin: 0; page-break-after: always; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>

    <div class="app-header">
        <img src="logo.jpg" class="logo" onerror="this.style.display='none'">
        <div class="title">טופס קליטת עובד וחתימה על חוזה</div>
    </div>

    <div class="container">
        
        <div class="card">
            <div class="card-title">1. פרטים אישיים (מלא כאן)</div>
            <div class="input-group">
                <span class="label">שם מלא (الاسم الكامل):</span>
                <input type="text" id="inpName" class="input" placeholder="ישראל ישראלי" oninput="updateContract()">
            </div>
            <div class="input-group">
                <span class="label">תעודת זהות (رقم الهوية):</span>
                <input type="tel" id="inpID" class="input" placeholder="123456789" oninput="updateContract()">
            </div>
            <div class="input-group">
                <span class="label">שכר שעתי מוסכם (₪):</span>
                <input type="number" id="inpSalary" class="input" value="35" oninput="updateContract()">
            </div>
        </div>

        <div class="card">
            <div class="card-title">2. הסכם העבודה (לקריאה)</div>
            <div class="contract-box">
                <h3 style="text-align:center; margin-top:0;">הסכם עבודה אישי</h3>
                <p><strong>בין: חברת מאד פרפיום בע"מ</strong> (המעסיק)<br>
                <strong>לבין:</strong> <span class="highlight" id="outName">_______</span> ת.ז <span class="highlight" id="outID">_______</span> (העובד)</p>
                
                <h4>1. תפקיד וסמכויות</h4>
                <ul><li>העובד יועסק בתפקיד מוכר / יועץ מכירות.</li></ul>
                
                <h4>2. שכר ותנאים</h4>
                <ul>
                    <li>שכר הבסיס: <strong><span class="highlight" id="outSalary">35</span> ₪ לשעה</strong>.</li>
                    <li>היקף משרה: משמרות. נסיעות והבראה כחוק.</li>
                </ul>
                
                <h4>3. תקופת העסקה</h4>
                <ul><li>תקופת ניסיון: 3-6 חודשים. הודעה מוקדמת בכתב כחוק.</li></ul>
                
                <h4>4. סודיות</h4>
                <ul><li>העובד מתחייב לשמור על סודיות מוחלטת.</li></ul>
                
                <p style="margin-top:20px;"><strong>ולראיה באו הצדדים על החתום:</strong></p>
            </div>
        </div>

        <div class="card">
            <div class="card-title">3. חתימה וצילום</div>
            
            <button class="btn btn-sig" id="btnSign" onclick="openSigPad()">
                <i class="fas fa-pen-nib"></i> לחץ כאן לחתימה
            </button>
            <br>
            <div style="display:flex; gap:10px;">
                <label class="btn btn-sig" id="btnFront">
                    <i class="fas fa-id-card"></i> תעודה
                    <input type="file" hidden accept="image/*" onchange="handleImg(this, 'front')">
                </label>
                <label class="btn btn-sig" id="btnBack">
                    <i class="fas fa-file-alt"></i> ספח
                    <input type="file" hidden accept="image/*" onchange="handleImg(this, 'back')">
                </label>
            </div>
        </div>

        <button class="btn btn-save" onclick="finish()">
            <i class="fas fa-file-pdf"></i> סיום ושמירה (PDF)
        </button>
        <div style="text-align:center; margin-top:10px; font-size:12px; color:#777;">לאחר השמירה, שלח את הקובץ למנהל בוואטסאפ.</div>

    </div>

    <div id="sigModal">
        <div class="sig-header">נא לחתום במרכז המסך</div>
        <canvas id="sigCanvas"></canvas>
        <div class="sig-footer">
            <button class="btn" style="background:#e74c3c; color:white;" onclick="clearPad()">נקה</button>
            <button class="btn" style="background:var(--green); color:white;" onclick="savePad()">אישור</button>
        </div>
    </div>

    <div id="printArea">
        <div class="a4-page">
            <div style="text-align:center; margin-bottom:20px;">
                <img src="logo.jpg" style="width:150px;">
                <h2 style="text-decoration:underline;">הסכם עבודה אישי</h2>
            </div>
            
            <div style="font-size:14px; line-height:1.6; text-align:justify;">
                <p>שנערך ונחתם בחדרה ביום <strong><span id="printDate"></span></strong></p>
                <p><strong>בין: חברת מאד פרפיום בע"מ</strong>, ח.פ 515456093 (להלן: "המעסיק") מצד אחד;<br>
                <strong>לבין: <span id="printName"></span></strong>, ת.ז <strong><span id="printID"></span></strong> (להלן: "העובד") מצד שני.</p>

                <h3>1. כללי</h3>
                <ul><li>העובד יועסק בתפקיד <strong>מוכר / יועץ מכירות</strong> בסניפי הרשת.</li></ul>

                <h3>2. שכר ותנאים</h3>
                <ul>
                    <li>שכר העובד יעמוד על סך <strong><span id="printSalary"></span> ₪ לשעה</strong> (ברוטו).</li>
                    <li>השכר ישולם עד ה-9 לכל חודש. נסיעות והבראה ישולמו ע"פ צו הרחבה.</li>
                </ul>

                <h3>3. תנאים סוציאליים</h3>
                <ul><li>הפרשות לפנסיה (תגמולים ופיצויים) יבוצעו כחוק לאחר 6 חודשים (או קודם אם קיים רצף).</li></ul>

                <h3>4. סודיות וסיום העסקה</h3>
                <ul>
                    <li>העובד מתחייב לשמור על סודיות עסקית.</li>
                    <li>הודעה מוקדמת לסיום עבודה תינתן בכתב כחוק.</li>
                </ul>

                <div style="margin-top:60px; display:flex; justify-content:space-between; align-items:flex-end;">
                    <div style="text-align:center;">
                        <img src="signther.jpg" style="width:100px; mix-blend-mode:multiply;"><br>
                        <strong>המעסיק</strong>
                    </div>
                    <div style="text-align:center;">
                        <img id="printSig" style="max-height:80px;"><br>
                        <strong>חתימת העובד</strong>
                    </div>
                </div>
            </div>
            <div style="position:absolute; bottom:20mm; left:0; width:100%; text-align:center; font-size:10px;">MAD PARFUMEUR LTD</div>
        </div>

        <div class="a4-page" style="text-align:center;">
            <h3>נספח: מסמכים מזהים</h3>
            <img id="printFront" style="max-width:90%; border:1px solid #ccc; margin-bottom:20px;">
            <br>
            <img id="printBack" style="max-width:90%; border:1px solid #ccc;">
        </div>
    </div>

    <script>
        // --- Setup ---
        const today = new Date().toLocaleDateString('he-IL');
        document.getElementById('printDate').innerText = today;

        // --- Live Update ---
        function updateContract() {
            const name = document.getElementById('inpName').value || '_______';
            const id = document.getElementById('inpID').value || '_______';
            const salary = document.getElementById('inpSalary').value || '35';

            // Update Preview Box
            document.getElementById('outName').innerText = name;
            document.getElementById('outID').innerText = id;
            document.getElementById('outSalary').innerText = salary;

            // Update Hidden Print Area
            document.getElementById('printName').innerText = name;
            document.getElementById('printID').innerText = id;
            document.getElementById('printSalary').innerText = salary;
        }

        // --- Signature ---
        const modal = document.getElementById('sigModal');
        const canvas = document.getElementById('sigCanvas');
        const ctx = canvas.getContext('2d');
        let painting = false;
        let sigData = null;

        function openSigPad() {
            modal.style.display = 'flex';
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - 150;
        }
        function clearPad() { ctx.clearRect(0,0,canvas.width,canvas.height); }
        function savePad() {
            sigData = canvas.toDataURL();
            document.getElementById('printSig').src = sigData;
            document.getElementById('btnSign').classList.add('done');
            document.getElementById('btnSign').innerHTML = '<i class="fas fa-check"></i> נחתם';
            modal.style.display = 'none';
        }

        // Drawing Events
        function start(e) { painting=true; draw(e); }
        function end() { painting=false; ctx.beginPath(); }
        function draw(e) {
            if(!painting) return; e.preventDefault();
            const x = (e.clientX||e.touches[0].clientX); 
            const y = (e.clientY||e.touches[0].clientY) - 60;
            ctx.lineWidth=3; ctx.lineCap='round'; ctx.lineTo(x,y); ctx.stroke(); ctx.beginPath(); ctx.moveTo(x,y);
        }
        canvas.addEventListener('mousedown', start); canvas.addEventListener('mouseup', end); canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchstart', start, {passive:false}); canvas.addEventListener('touchend', end); canvas.addEventListener('touchmove', draw, {passive:false});

        // --- Images ---
        let imgF = false, imgB = false;
        function handleImg(input, type) {
            if(input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    if(type==='front') { 
                        imgF=true; 
                        document.getElementById('printFront').src = e.target.result;
                        document.getElementById('btnFront').classList.add('done');
                    } else { 
                        imgB=true; 
                        document.getElementById('printBack').src = e.target.result;
                        document.getElementById('btnBack').classList.add('done');
                    }
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- Finish ---
        function finish() {
            const name = document.getElementById('inpName').value;
            if(!name) return alert('נא למלא שם מלא');
            if(!sigData) return alert('חובה לחתום');
            if(!imgF) return alert('חובה לצרף תעודת זהות');
            
            window.print();
            
            setTimeout(() => {
                if(confirm("פתר את הוואטסאפ למשלוח הקובץ למנהל?")) {
                    const msg = `היי, הנה הסכם העבודה החתום של ${name}. (נא לצרף את ה-PDF ששמרת)`;
                    window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
                }
            }, 1000);
        }
    </script>
</body>
</html>
