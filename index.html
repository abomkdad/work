<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAD System - Full Legal Contract</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root { 
            --primary: #D4AF37; 
            --dark: #2c3e50; 
            --light: #f8f9fa;
            --success: #27ae60;
        }
        
        body { margin: 0; padding: 0; font-family: 'Assistant', sans-serif; background: var(--light); color: #333; }
        
        /* --- Admin Panel --- */
        #adminView { 
            max-width: 800px; margin: 20px auto; background: white; padding: 25px; 
            border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: block;
        }
        .input-row { display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
        .input-group { flex: 1; min-width: 200px; }
        .input-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .input-field { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        
        /* Contract Editor */
        .editor-container {
            border: 2px solid var(--primary); border-radius: 8px; background: #fff; margin-top: 15px;
            height: 600px; overflow-y: auto; padding: 30px; position: relative;
        }
        #editorBody { outline: none; line-height: 1.6; font-size: 14px; text-align: justify; }
        #editorBody h3 { border-bottom: 2px solid #eee; padding-bottom: 5px; margin-top: 25px; font-size: 16px; font-weight: bold; color: var(--dark); }
        #editorBody ul, #editorBody ol { padding-right: 20px; }
        #editorBody li { margin-bottom: 5px; }
        
        .btn-main { 
            width: 100%; padding: 15px; background: var(--dark); border: none; 
            border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; color: var(--primary);
            margin-top: 20px; transition: 0.3s;
        }

        /* --- Employee Wizard --- */
        #employeeView { display: none; height: 100vh; flex-direction: column; }
        .wizard-header { background: var(--dark); color: white; padding: 15px; text-align: center; font-size: 18px; font-weight: bold; position: sticky; top: 0; z-index: 100; }
        .step-container { flex: 1; padding: 20px; overflow-y: auto; display: none; }
        .step-container.active { display: block; animation: fadeIn 0.3s; }
        .big-btn {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            width: 100%; padding: 20px; margin-bottom: 15px;
            border: 2px dashed #ccc; border-radius: 12px; background: white;
            font-size: 18px; font-weight: bold; color: #555; cursor: pointer;
        }
        .big-btn.done { border-color: var(--success); color: var(--success); background: #e8f8f5; border-style: solid; }
        .nav-bar { padding: 15px; background: white; border-top: 1px solid #eee; display: flex; justify-content: space-between; gap: 10px; }
        .nav-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: bold; font-size: 16px; }
        .btn-next { background: var(--dark); color: white; }
        
        /* --- Signature Modal --- */
        #sigModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 2000; display: none; flex-direction: column; }
        canvas { flex: 1; width: 100%; background: #fff; touch-action: none; cursor: crosshair; }
        .sig-toolbar { padding: 10px; display: flex; gap: 10px; background: #eee; }

        /* --- Final Preview (A4) --- */
        #previewContainer { display: none; background: #555; padding: 10px; }
        .a4-page {
            background: white; width: 210mm; min-height: 297mm; margin: 0 auto; padding: 20mm;
            box-sizing: border-box; position: relative; 
        }
        @media screen and (max-width: 800px) { .a4-page { width: 100%; height: auto; padding: 15mm; } }

        @media print {
            #adminView, #employeeView, .nav-bar { display: none !important; }
            #previewContainer { display: block !important; background: white; padding: 0; }
            .a4-page { width: 100%; margin: 0; box-shadow: none; padding: 20mm; page-break-after: always; }
            .footer { position: fixed; bottom: 0; left: 0; width: 100%; text-align: center; border-top: 1px solid #ccc; padding-top: 10px; background: white; }
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="adminView">
        <div style="text-align:center; margin-bottom:20px;">
            <img src="logo.jpg" style="max-width: 120px;">
            <h2>×¢×•×¨×š ×—×•×–×™× ××ª×§×“× (×œ×× ×”×œ)</h2>
        </div>
        
        <div class="input-row">
            <div class="input-group">
                <label>×©× ×”×¢×•×‘×“</label>
                <input type="text" id="admName" class="input-field" placeholder="×™×©×¨××œ ×™×©×¨××œ×™">
            </div>
            <div class="input-group">
                <label>×ª×¢×•×“×ª ×–×”×•×ª</label>
                <input type="tel" id="admID" class="input-field" placeholder="××¡×¤×¨ ×–×”×•×ª">
            </div>
        </div>
        <div class="input-row">
            <div class="input-group">
                <label>×©×›×¨ ×œ×©×¢×”</label>
                <input type="number" id="admSalary" class="input-field" value="35">
            </div>
            <div class="input-group">
                <label>×”×™×§×£ ××©×¨×”</label>
                <input type="text" id="admScope" class="input-field" value="××©××¨×•×ª / ××©×¨×” ×—×œ×§×™×ª">
            </div>
        </div>

        <label style="font-weight:bold; margin-top:20px; display:block;">×ª×•×›×Ÿ ×”×—×•×–×” (×¢×¨×•×š ×›××Ÿ ××ª ×”×˜×§×¡×˜ ×”××œ×):</label>
        <div class="editor-container">
            <div id="editorBody" contenteditable="true">
                
                <h2 style="text-align:center; text-decoration:underline;">×”×¡×›× ×¢×‘×•×“×” ××™×©×™</h2>
                <p style="text-align:center;">×©× ×¢×¨×š ×•× ×—×ª× ×‘×—×“×¨×” ×‘×™×•× <strong>{{DATE}}</strong></p>
                
                <p><strong>×‘×™×Ÿ: ×—×‘×¨×ª ×××“ ×¤×¨×¤×™×•× ×‘×¢"× (MAD PARFUMEUR)</strong>, ×—.×¤ 515456093 (×œ×”×œ×Ÿ: "<strong>×”××¢×¡×™×§</strong>") ××¦×“ ××—×“;</p>
                <p><strong>×œ×‘×™×Ÿ: {{NAME}}</strong>, ×ª.×– <strong>{{ID}}</strong> (×œ×”×œ×Ÿ: "<strong>×”×¢×•×‘×“</strong>") ××¦×“ ×©× ×™.</p>

                <h3>1. ×ª×¤×§×™×“ ×•×¡××›×•×™×•×ª</h3>
                <ol>
                    <li>×”×¢×•×‘×“ ×™×•×¢×¡×§ ×‘×ª×¤×§×™×“ <strong>××•×›×¨ / ×™×•×¢×¥ ××›×™×¨×•×ª</strong> ×‘×¡× ×™×¤×™ ×”×¨×©×ª.</li>
                    <li>×‘××¡×’×¨×ª ×ª×¤×§×™×“×• ×™×”×™×” ××—×¨××™ ×¢×œ: ××›×™×¨×•×ª, × ×™×”×•×œ ×§×•×¤×”, ×¡×™×“×•×¨ ×¡×—×•×¨×”, × ×™×§×™×•×Ÿ ×”×¡× ×™×£, ×•××ª×Ÿ ×©×™×¨×•×ª ×œ×§×•×—×•×ª ×‘×¨××” ×’×‘×•×”×”.</li>
                    <li>×”×¢×•×‘×“ ××ª×—×™×™×‘ ×œ×‘×¦×¢ ××ª ×¢×‘×•×“×ª×• ×‘××¡×™×¨×•×ª, ×‘××™×•×× ×•×ª ×•×‘× ××× ×•×ª.</li>
                </ol>

                <h3>2. ×ª×§×•×¤×ª ×”×¢×¡×§×”</h3>
                <ol>
                    <li>×ª×§×•×¤×ª ×”×¢×¡×§×ª×• ×©×œ ×”×¢×•×‘×“ ×ª×—×œ ×‘×™×•× ×”×—×ª×™××” ×¢×œ ×”×¡×›× ×–×”.</li>
                    <li>×ª×§×•×¤×ª ×”× ×™×¡×™×•×Ÿ: 3 ×”×—×•×“×©×™× ×”×¨××©×•× ×™× ×™×™×—×©×‘×• ×›×ª×§×•×¤×ª × ×™×¡×™×•×Ÿ. ×”×—×‘×¨×” ×¨×©××™×ª ×œ×”××¨×™×š ×ª×§×•×¤×” ×–×• ×‘×”×ª×× ×œ×©×™×§×•×œ ×“×¢×ª×”.</li>
                </ol>

                <h3>3. ×©×¢×•×ª ×¢×‘×•×“×” ×•×”×™×§×£ ××©×¨×”</h3>
                <ol>
                    <li>×”×¢×•×‘×“ ×™×¢×‘×•×“ ×‘×”×™×§×£ ××©×¨×” ×©×œ: <strong>{{SCOPE}}</strong>.</li>
                    <li>×©×¢×•×ª ×”×¢×‘×•×“×” ×™×§×‘×¢×• ×‘×¡×™×“×•×¨ ×¢×‘×•×“×” ×©×‘×•×¢×™ ×©×™×¤×•×¨×¡× ×¢"×™ ×”×× ×”×œ.</li>
                    <li>×”×¢×•×‘×“ × ×“×¨×© ×œ×”×’×™×¢ ×œ××©××¨×ª ×‘×–××Ÿ.</li>
                </ol>

                <h3>4. ×©×›×¨ ×•×ª× ××™× × ×œ×•×•×™×</h3>
                <ol>
                    <li>×‘×ª××•×¨×” ×œ×¢×‘×•×“×ª×•, ×™×©×œ× ×”××¢×¡×™×§ ×œ×¢×•×‘×“ ×©×›×¨ ×©×¢×ª×™ ×‘×¡×š: <strong>{{SALARY}} â‚ª ×œ×©×¢×”</strong> (×‘×¨×•×˜×•).</li>
                    <li>×”×©×›×¨ ×™×©×•×œ× ×œ× ×™××•×—×¨ ××”-9 ×œ×›×œ ×—×•×“×© ×§×œ× ×“×¨×™.</li>
                    <li><strong>× ×¡×™×¢×•×ª:</strong> ×”×¢×•×‘×“ ×–×›××™ ×œ×”×—×–×¨ ×”×•×¦××•×ª × ×¡×™×¢×” ×¢"×¤ ×¦×• ×”×”×¨×—×‘×” (×—×•×¤×©×™ ×—×•×“×©×™).</li>
                    <li><strong>×”×‘×¨××”:</strong> ×ª×©×•×œ× ×œ××—×¨ ×”×©×œ××ª ×©× ×ª ×¢×‘×•×“×” ××œ××”.</li>
                </ol>

                <h3>5. ×ª× ××™× ×¡×•×¦×™××œ×™×™× (×¤× ×¡×™×”)</h3>
                <ol>
                    <li>×”×¢×•×‘×“ ×™×‘×•×˜×— ×‘×‘×™×˜×•×— ×¤× ×¡×™×•× ×™ ××§×™×£ ×‘×”×ª×× ×œ×¦×• ×”×”×¨×—×‘×” ×œ×‘×™×˜×•×— ×¤× ×¡×™×•× ×™ ×‘××©×§.</li>
                    <li>×”×”×¤×¨×©×•×ª (×ª×’××•×œ×™× ×•×¤×™×¦×•×™×™×) ×™×‘×•×¦×¢×• ×›×—×•×§ ×œ××—×¨ 6 ×—×•×“×©×™ ×¢×‘×•×“×” (××• ×§×•×“× ×œ×›×Ÿ ×× ×§×™×™× ×‘×™×˜×•×— ×¤× ×¡×™×•× ×™ ×¤×¢×™×œ).</li>
                    <li>×™××™ ×—×•×¤×©×” ×•××—×œ×” ×™×¦×‘×¨×• ×•×™× ×•×¦×œ×• ×‘×”×ª×× ×œ×—×•×§ ×—×•×¤×©×” ×©× ×ª×™×ª ×•×—×•×§ ×“××™ ××—×œ×”.</li>
                </ol>

                <h3>6. ×©××™×¨×ª ×¡×•×“×™×•×ª ×•××™ ×ª×—×¨×•×ª</h3>
                <ol>
                    <li>×”×¢×•×‘×“ ××ª×—×™×™×‘ ×œ×©××•×¨ ×‘×¡×•×“×™×•×ª ××•×—×œ×˜×ª ×›×œ ××™×“×¢ ×¢×¡×§×™, ×œ×¨×‘×•×ª ×¨×©×™××•×ª ×œ×§×•×—×•×ª, ×¡×¤×§×™× ×•××—×™×¨×•× ×™×.</li>
                    <li>×—×œ ××™×¡×•×¨ ××•×—×œ×˜ ×œ×”×¢×‘×™×¨ ××™×“×¢ ×œ××ª×—×¨×™× ××• ×œ×¢×©×•×ª ×‘×• ×©×™××•×© ××™×©×™.</li>
                </ol>

                <h3>7. ×¡×™×•× ×™×—×¡×™ ×¢×‘×•×“×”</h3>
                <ol>
                    <li>×›×œ ×¦×“ ×¨×©××™ ×œ×¡×™×™× ××ª ×™×—×¡×™ ×”×¢×‘×•×“×” ×‘××ª×Ÿ ×”×•×“×¢×” ××•×§×“××ª ×‘×›×ª×‘, ×‘×”×ª×× ×œ×—×•×§.</li>
                    <li>×”××¢×¡×™×§ ×¨×©××™ ×œ×¡×™×™× ××ª ×¢×‘×•×“×ª ×”×¢×•×‘×“ <strong>×œ××œ×ª×¨</strong> ×‘××§×¨×™× ×—××•×¨×™× ×›×’×•×Ÿ ×’× ×™×‘×”, ××œ×™××•×ª ××• ×”×¤×¨×ª ×××•× ×™×.</li>
                </ol>

                <p><strong>×•×œ×¨××™×” ×‘××• ×”×¦×“×“×™× ×¢×œ ×”×—×ª×•×:</strong></p>
            </div>
        </div>
        
        <button class="btn-main" onclick="createLink()">ğŸ”— ×¦×•×¨ ×§×™×©×•×¨ ×•×©×œ×— ×œ×¢×•×‘×“ ×‘×•×•××˜×¡××¤</button>
        <div id="linkResult" style="margin-top:15px; word-break:break-all; display:none; background:#f0f0f0; padding:15px; border-radius:5px; text-align:center;"></div>
    </div>

    <div id="employeeView">
        <div class="wizard-header">MAD PARFUMEUR - ×—×ª×™××” ×“×™×’×™×˜×œ×™×ª</div>

        <div id="step1" class="step-container active">
            <h2 style="text-align:center;">×©×œ×•×, <span id="dispNameHeader"></span></h2>
            <p style="text-align:center;">×× × ×•×•×“× ×©×¤×¨×˜×™×š × ×›×•× ×™× ×œ×¤× ×™ ×”×—×ª×™××”:</p>
            
            <div style="background:white; padding:15px; border-radius:10px; margin-bottom:20px;">
                <p><strong>×ª×¢×•×“×ª ×–×”×•×ª:</strong> <span id="dispID"></span></p>
                <p><strong>×©×›×¨ ×œ×©×¢×”:</strong> <span id="dispSalary"></span> â‚ª</p>
                <p><strong>××©×¨×”:</strong> <span id="dispScope"></span></p>
            </div>
        </div>

        <div id="step2" class="step-container">
            <h2 style="text-align:center;">×—×ª×™××”</h2>
            <button class="big-btn" id="btnSignTrigger" onclick="openSigPad()">
                <i class="fas fa-pen-nib"></i> ×œ×—×¥ ×›××Ÿ ×œ×—×ª×™××”
            </button>
            <img id="previewSig" style="max-width:100%; display:none; margin:10px auto; border:1px solid #eee;">
        </div>

        <div id="step3" class="step-container">
            <h2 style="text-align:center;">×¦×™×œ×•× ××¡××›×™×</h2>
            <label class="big-btn" id="btnUploadFront">
                <i class="fas fa-id-card"></i> ×¦×™×œ×•× ×ª×¢×•×“×” (×§×“××™)
                <input type="file" hidden accept="image/*" onchange="handleImg(this, 'imgFront', 'btnUploadFront')">
            </label>
            <label class="big-btn" id="btnUploadBack">
                <i class="fas fa-file-alt"></i> ×¦×™×œ×•× ×¡×¤×—
                <input type="file" hidden accept="image/*" onchange="handleImg(this, 'imgBack', 'btnUploadBack')">
            </label>
        </div>

        <div class="nav-bar">
            <button class="nav-btn" style="background:#eee; color:#333; display:none;" id="btnPrev" onclick="prevStep()">×—×–×•×¨</button>
            <button class="nav-btn btn-next" onclick="nextStep()" id="btnNext">×”×‘×</button>
        </div>
    </div>

    <div id="sigModal">
        <div style="background:#f0f0f0; padding:10px; text-align:center; font-weight:bold;">×—×ª×•× ×›××Ÿ</div>
        <canvas id="theCanvas"></canvas>
        <div class="sig-toolbar">
            <button class="nav-btn" style="background:#e74c3c; color:white;" onclick="clearPad()">× ×§×”</button>
            <button class="nav-btn" style="background:var(--success); color:white;" onclick="savePad()">××™×©×•×¨</button>
        </div>
    </div>

    <div id="previewContainer">
        <div class="a4-page">
            <div style="text-align:center;">
                <img src="logo.jpg" style="width:180px;">
            </div>
            
            <div id="finalContractBody"></div>

            <div style="margin-top:50px; display:flex; justify-content:space-between; align-items:flex-end;">
                <div style="text-align:center;">
                    <img src="signther.jpg" style="width:100px; mix-blend-mode:multiply;"><br>
                    <strong>×”××¢×¡×™×§</strong>
                </div>
                <div style="text-align:center;">
                    <img id="finalSigImage" style="max-height:80px;"><br>
                    <strong>×—×ª×™××ª ×”×¢×•×‘×“</strong>
                </div>
            </div>
            <div class="footer">MAD PARFUMEUR LTD | 515456093</div>
        </div>

        <div class="a4-page id-page">
            <h3 style="text-align:center; text-decoration:underline;">× ×¡×¤×—: ××¡××›×™× ××–×”×™×</h3>
            <div style="text-align:center; margin-top:20px;">
                <img id="finalImgFront" style="max-width:90%; border:1px solid #ccc; margin-bottom:20px;"><br>
                <img id="finalImgBack" style="max-width:90%; border:1px solid #ccc;">
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let empData = {};
        let sigDataUrl = null;
        let imgFrontUrl = null;
        let imgBackUrl = null;

        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            
            // Set Date in Admin View
            document.getElementById('editorBody').innerHTML = document.getElementById('editorBody').innerHTML.replace('{{DATE}}', new Date().toLocaleDateString('he-IL'));

            if(params.has('d')) {
                // Employee Mode
                document.getElementById('adminView').style.display = 'none';
                document.getElementById('employeeView').style.display = 'flex';
                
                try {
                    const json = decodeURIComponent(escape(atob(params.get('d'))));
                    empData = JSON.parse(json);
                    
                    // Fill Review Step
                    document.getElementById('dispNameHeader').innerText = empData.n.split(' ')[0];
                    document.getElementById('dispID').innerText = empData.i;
                    document.getElementById('dispSalary').innerText = empData.s;
                    document.getElementById('dispScope').innerText = empData.sc;

                    // Fill Final Contract Body (Search & Replace in the HTML content)
                    let content = empData.body;
                    content = content.replace(/{{NAME}}/g, empData.n)
                                     .replace(/{{ID}}/g, empData.i)
                                     .replace(/{{SALARY}}/g, empData.s)
                                     .replace(/{{SCOPE}}/g, empData.sc);
                    
                    document.getElementById('finalContractBody').innerHTML = content;

                } catch(e) { alert('×§×™×©×•×¨ ×œ× ×ª×§×™×Ÿ'); }
            }
        };

        function createLink() {
            // Get the HTML content from the editor
            const contractHTML = document.getElementById('editorBody').innerHTML;
            
            const data = {
                n: document.getElementById('admName').value,
                i: document.getElementById('admID').value,
                s: document.getElementById('admSalary').value,
                sc: document.getElementById('admScope').value,
                body: contractHTML // We send the FULL EDITED HTML
            };
            
            if(!data.n || !data.i) return alert('× × ×œ××œ× ×©× ×•×ª×¢×•×“×ª ×–×”×•×ª');
            
            // Encode
            const str = btoa(unescape(encodeURIComponent(JSON.stringify(data))));
            const link = window.location.href.split('?')[0] + '?d=' + str;
            
            const res = document.getElementById('linkResult');
            res.style.display = 'block';
            res.innerHTML = `<strong>×”×¢×ª×§ ×§×™×©×•×¨ ×•×©×œ×—:</strong><br><a href="${link}">${link}</a>`;
            navigator.clipboard.writeText(link);
            alert('×”×§×™×©×•×¨ ×”×•×¢×ª×§!');
        }

        // Wizard Navigation
        function nextStep() {
            if(currentStep === 2 && !sigDataUrl) return alert('×—×•×‘×” ×œ×—×ª×•×');
            if(currentStep === 3) {
                if(!imgFrontUrl) return alert('×—×•×‘×” ×œ×¦×¨×£ ×ª×¢×•×“×”');
                document.getElementById('employeeView').style.display = 'none';
                document.getElementById('previewContainer').style.display = 'block';
                setTimeout(() => window.print(), 500);
                return;
            }
            document.getElementById('step'+currentStep).classList.remove('active');
            currentStep++;
            document.getElementById('step'+currentStep).classList.add('active');
            document.getElementById('btnPrev').style.display = 'block';
            if(currentStep === 3) document.getElementById('btnNext').innerText = '×¡×™×•× ×•×©××™×¨×” (PDF)';
        }

        function prevStep() {
            document.getElementById('step'+currentStep).classList.remove('active');
            currentStep--;
            document.getElementById('step'+currentStep).classList.add('active');
            if(currentStep === 1) document.getElementById('btnPrev').style.display = 'none';
            document.getElementById('btnNext').innerText = '×”×‘×';
        }

        // Signature Pad
        const sigModal = document.getElementById('sigModal');
        const canvas = document.getElementById('theCanvas');
        const ctx = canvas.getContext('2d');
        let painting = false;

        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight - 100; }
        function openSigPad() { sigModal.style.display = 'flex'; resizeCanvas(); }
        function clearPad() { ctx.clearRect(0,0,canvas.width,canvas.height); }
        
        function startDraw(e) { painting = true; draw(e); }
        function endDraw() { painting = false; ctx.beginPath(); }
        function draw(e) {
            if(!painting) return;
            e.preventDefault();
            const x = (e.clientX || e.touches[0].clientX);
            const y = (e.clientY || e.touches[0].clientY) - 50;
            ctx.lineWidth = 3; ctx.lineCap = 'round'; ctx.lineTo(x, y); ctx.stroke(); ctx.beginPath(); ctx.moveTo(x, y);
        }
        canvas.addEventListener('touchstart', startDraw, {passive:false});
        canvas.addEventListener('touchend', endDraw);
        canvas.addEventListener('touchmove', draw, {passive:false});
        canvas.addEventListener('mousedown', startDraw);
        canvas.addEventListener('mouseup', endDraw);
        canvas.addEventListener('mousemove', draw);

        function savePad() {
            sigDataUrl = canvas.toDataURL();
            document.getElementById('previewSig').src = sigDataUrl;
            document.getElementById('previewSig').style.display = 'block';
            document.getElementById('finalSigImage').src = sigDataUrl;
            document.getElementById('btnSignTrigger').classList.add('done');
            document.getElementById('btnSignTrigger').innerHTML = '<i class="fas fa-check"></i> × ×—×ª×';
            sigModal.style.display = 'none';
        }

        function handleImg(input, targetID, btnID) {
            if(input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    if(targetID==='imgFront') imgFrontUrl=e.target.result;
                    if(targetID==='imgBack') imgBackUrl=e.target.result;
                    document.getElementById('final'+targetID.charAt(0).toUpperCase()+targetID.slice(1)).src = e.target.result;
                    document.getElementById(btnID).classList.add('done');
                    document.getElementById(btnID).innerHTML = '<i class="fas fa-check"></i> ×¦×•×¨×£';
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</body>
</html>
